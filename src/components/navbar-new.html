<!-- CONVEXO CORPORATE NAVBAR -->
<nav class="convexo-navbar">
    <div class="navbar-container">
        <!-- Logo Section -->
        <div class="navbar-logo">
            <a href="/" class="logo-link">
                <img src="/src/assets/brading/logoversions/convexo_imagotico_white.png" alt="Convexo" class="logo-image">
            </a>
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        
        <!-- Navigation Links -->
        <div class="navbar-menu" id="navbarMenu">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="/" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="/about_us" class="nav-link">About</a>
                </li>
                
                <!-- Digital Access Dropdown -->
                <li class="nav-item dropdown">
                    <a href="/digital_access" class="nav-link dropdown-toggle">
                        Digital Access
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Enterprise</h4>
                                <ul class="dropdown-links">
                                    <li><a href="/digital_access/private_brokerage" class="dropdown-link">
                                        <i class="fas fa-chart-line"></i>
                                        <span>Private Brokerage</span>
                                    </a></li>
                                    <li><a href="/digital_access/corporate_treasury" class="dropdown-link">
                                        <i class="fas fa-building"></i>
                                        <span>Corporate Treasury</span>
                                    </a></li>
                                    <li><a href="/digital_access/private_brokerage/calculator" class="dropdown-link">
                                        <i class="fas fa-calculator"></i>
                                        <span>Trading Calculator</span>
                                    </a></li>
                                </ul>
                            </div>
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Personal</h4>
                                <ul class="dropdown-links">
                                    <li><a href="https://app.convexo.xyz" class="dropdown-link" target="_blank">
                                        <i class="fas fa-mobile-alt"></i>
                                        <span>Convexo App</span>
                                    </a></li>
                                    <li><a href="/digital_access/digital_card" class="dropdown-link">
                                        <i class="fas fa-credit-card"></i>
                                        <span>Digital Card</span>
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
                
                <!-- Digital Financial Services Dropdown -->
                <li class="nav-item dropdown">
                    <a href="/digital_financial_services" class="nav-link dropdown-toggle">
                        Digital Finance
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">Enterprise Services</h4>
                                <ul class="dropdown-links">
                                    <li><a href="/digital_financial_services/payroll" class="dropdown-link">
                                        <i class="fas fa-users"></i>
                                        <span>Payroll</span>
                                    </a></li>
                                    <li><a href="/digital_financial_services/cross_border" class="dropdown-link">
                                        <i class="fas fa-globe"></i>
                                        <span>Cross-border Payments</span>
                                    </a></li>
                                    <li><a href="/digital_financial_services/asset_management" class="dropdown-link">
                                        <i class="fas fa-briefcase"></i>
                                        <span>Asset Management</span>
                                    </a></li>
                                    <li><a href="/digital_financial_services/custody_solutions" class="dropdown-link">
                                        <i class="fas fa-shield-alt"></i>
                                        <span>Custody Solutions</span>
                                    </a></li>
                                    <li><a href="/digital_financial_services/rwa_tokenization" class="dropdown-link">
                                        <i class="fas fa-coins"></i>
                                        <span>RWA Tokenization</span>
                                    </a></li>
                                </ul>
                            </div>
                            <div class="dropdown-section">
                                <h4 class="dropdown-header">DeFi & Trading</h4>
                                <ul class="dropdown-links">
                                    <li><a href="/digital_financial_services/stablecoins" class="dropdown-link">
                                        <i class="fas fa-dollar-sign"></i>
                                        <span>Stablecoins</span>
                                    </a></li>
                                    <li><a href="/digital_financial_services/liquidity_provision" class="dropdown-link">
                                        <i class="fas fa-water"></i>
                                        <span>Liquidity Provision</span>
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
            
            <!-- Action Buttons -->
            <div class="navbar-actions">
                <a href="#" class="btn btn-login">
                    <i class="fas fa-user"></i>
                    <span>Login</span>
                </a>
                <a href="https://form.typeform.com/to/R7OwSKPX" class="btn btn-signup" target="_blank">
                    <i class="fas fa-rocket"></i>
                    <span>Sign Up</span>
                </a>
                

            </div>
        </div>
    </div>
</nav>

<!-- Navbar Backdrop for Mobile -->
<div class="navbar-backdrop" id="navbarBackdrop"></div>

<!-- Navbar JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const navbar = document.querySelector('.convexo-navbar');
    const mobileToggle = document.getElementById('mobileMenuToggle');
    const navbarMenu = document.getElementById('navbarMenu');
    const navbarBackdrop = document.getElementById('navbarBackdrop');
    const dropdowns = document.querySelectorAll('.dropdown');
    
    // Check if we're on mobile
    function isMobile() {
        return window.innerWidth <= 768;
    }
    
    // Mobile menu toggle
    function toggleMobileMenu() {
        const isOpen = navbarMenu.classList.contains('active');
        
        if (isOpen) {
            navbarMenu.classList.remove('active');
            navbarBackdrop.classList.remove('active');
            mobileToggle.classList.remove('active');
            document.body.classList.remove('navbar-open');
        } else {
            navbarMenu.classList.add('active');
            navbarBackdrop.classList.add('active');
            mobileToggle.classList.add('active');
            document.body.classList.add('navbar-open');
        }
    }
    
    // Close mobile menu
    function closeMobileMenu() {
        navbarMenu.classList.remove('active');
        navbarBackdrop.classList.remove('active');
        mobileToggle.classList.remove('active');
        document.body.classList.remove('navbar-open');
    }
    
    // Close all dropdowns
    function closeAllDropdowns() {
        dropdowns.forEach(dropdown => {
            dropdown.classList.remove('active');
        });
    }
    
    // Event listeners
    if (mobileToggle) {
        mobileToggle.addEventListener('click', toggleMobileMenu);
    }
    
    if (navbarBackdrop) {
        navbarBackdrop.addEventListener('click', closeMobileMenu);
    }
    
    // Enhanced dropdown functionality
    dropdowns.forEach(dropdown => {
        const dropdownToggle = dropdown.querySelector('.dropdown-toggle');
        const dropdownMenu = dropdown.querySelector('.dropdown-menu');
        
        if (!dropdownToggle || !dropdownMenu) return;
        
        // Handle dropdown toggle click (works on all devices)
        dropdownToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const isCurrentlyActive = dropdown.classList.contains('active');
            
            // Close all other dropdowns first
            closeAllDropdowns();
            
            // Toggle current dropdown
            if (!isCurrentlyActive) {
                dropdown.classList.add('active');
                console.log('Dropdown activated:', dropdown);
            }
        });
        
        // Handle dropdown menu hover for desktop only
        if (!isMobile()) {
            dropdown.addEventListener('mouseenter', function() {
                // Close other dropdowns
                dropdowns.forEach(otherDropdown => {
                    if (otherDropdown !== dropdown) {
                        otherDropdown.classList.remove('active');
                    }
                });
                dropdown.classList.add('active');
            });
            
            dropdown.addEventListener('mouseleave', function() {
                dropdown.classList.remove('active');
            });
        }
        
        // Prevent dropdown from closing when clicking inside
        if (dropdownMenu) {
            dropdownMenu.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    });
    
    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
            closeAllDropdowns();
        }
    });
    
    // Handle window resize
    window.addEventListener('resize', function() {
        // Close mobile menu if window is resized to desktop
        if (!isMobile() && navbarMenu.classList.contains('active')) {
            closeMobileMenu();
        }
        
        // Close all dropdowns on resize
        closeAllDropdowns();
    });
    
    // Navbar scroll effect
    let lastScrollTop = 0;
    window.addEventListener('scroll', function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (scrollTop > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
        
        // Hide navbar on scroll down, show on scroll up
        if (scrollTop > lastScrollTop && scrollTop > 200) {
            navbar.classList.add('navbar-hidden');
        } else {
            navbar.classList.remove('navbar-hidden');
        }
        
        lastScrollTop = scrollTop;
    });
    
    // Highlight current page
    function highlightCurrentPage() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link, .dropdown-link');
        
        navLinks.forEach(link => {
            const linkPath = new URL(link.href).pathname;
            if (linkPath === currentPath) {
                link.classList.add('active');
                // Also highlight parent dropdown if it's a dropdown link
                const parentDropdown = link.closest('.dropdown');
                if (parentDropdown) {
                    parentDropdown.querySelector('.dropdown-toggle').classList.add('active');
                }
            }
        });
    }
    
    // Initialize
    highlightCurrentPage();
    
    // Debug logging
    console.log('Navbar initialized with', dropdowns.length, 'dropdowns');
});
</script> 